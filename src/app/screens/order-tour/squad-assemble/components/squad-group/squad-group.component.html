<div fxFill fxLayout="row" fxLayoutAlign="center center" dir="rtl">
  <div fxFlex="90" fxLayout="column" fxLayoutAlign=" center">
    <div fxFlex="10">
      <app-form-header [slots]="{ gender}" [slot]="group.header.slot">
        <div title fxLayout="row" fxLayoutAlign="start center">
          <app-typography color="primary" bold="600" size="16">
            {{group.header.label}}
          </app-typography>
        </div>
      </app-form-header>
    </div>
    <div [fxFlex]="mixed ? 60 : 90">
      <app-form-container [cols]="group.cols" [questions]="group.questions" [$questions]="$questions"
        [hasBottomButton]="true" [slots]="{participants, instructors, chaperones, medics}">
      </app-form-container>
    </div>
    <div fxLayout="row" fxLayoutAlign="start center" fxFlex="5">
      <ng-container *ngFor="let item of list; let i = index">
        <div fxFlex="30">
          <app-typography size="14" class="label-text" [bold]="500">
            {{ item.label }}:
          </app-typography>
          <app-typography [bold]="600" size="14">
            {{ item.value }}
          </app-typography>
        </div>
        <div class="divider" fxFlex="20" *ngIf="i !== 0">|</div>
      </ng-container>
    </div>
  </div>
</div>

<!-- template components -->

<ng-template #gender>
  <button mat-icon-button class="gender-button mat-elevation-z1" disableRipple="true" (click)="onGenderChange()">
    <app-icon type="svg" key="gender" scale="2"></app-icon>
  </button>
</ng-template>

<ng-template #participants let-group="group" let-formGroup="formGroup">
  <mat-grid-list cols="5" rowHeight="2vh">
    <ng-container *ngFor="let question of group.questions">
      <mat-grid-tile [colspan]="question.cols" [rowspan]="question.rows || 2">
        <app-form-input class="group-input" [groupLabel]="question.key === 'girls' ? question.label : 'g'"
          [control]="formGroup.controls[group.key].controls[question.key]" [label]="question.label"
          [split]="cols > question.cols" [theme]="question.key === 'girls' && 'accent'" [type]="question.controlType">
        </app-form-input>
      </mat-grid-tile>
      <mat-grid-tile *ngIf="question.offset"></mat-grid-tile>
    </ng-container>
  </mat-grid-list>
</ng-template>

<ng-template #instructors let-group="group" let-formGroup="formGroup">
  <mat-grid-list cols="5" rowHeight="2vh">
    <ng-container *ngFor="let question of group.questions">
      <mat-grid-tile [colspan]="question.cols" [rowspan]="question.rows || 2">
        <app-form-input class="group-input" [groupLabel]="question.key === 'girls' ? question.label : 'g'"
          [control]="formGroup.controls[group.key].controls[question.key]" [label]="question.label"
          [split]="cols > question.cols" [theme]="question.key === 'girls' && 'accent'" [type]="question.controlType">
        </app-form-input>
      </mat-grid-tile>
      <mat-grid-tile *ngIf="question.offset"></mat-grid-tile>
    </ng-container>
  </mat-grid-list>
</ng-template>

<ng-template #chaperones let-group="group" let-formGroup="formGroup">
  <mat-grid-list cols="5" rowHeight="2vh">
    <ng-container *ngFor="let question of group.questions">
      <mat-grid-tile [colspan]="question.cols" [rowspan]="question.rows || 2">
        <app-form-input class="group-input" [groupLabel]="question.key === 'girls' ? question.label : 'g'"
          [control]="formGroup.controls[group.key].controls[question.key]" [label]="question.label"
          [split]="cols > question.cols" [theme]="question.key === 'girls' && 'accent'" [type]="question.controlType">
        </app-form-input>
      </mat-grid-tile>
      <mat-grid-tile *ngIf="question.offset"></mat-grid-tile>
    </ng-container>
  </mat-grid-list>
</ng-template>

<ng-template #medics let-group="group" let-formGroup="formGroup">
  <mat-grid-list cols="5" rowHeight="2vh">
    <ng-container *ngFor="let question of group.questions">
      <mat-grid-tile [colspan]="question.cols" [rowspan]="question.rows || 2">
        <app-form-input class="group-input" [groupLabel]="question.key === 'girls' ? question.label : 'g'"
          [control]="formGroup.controls[group.key].controls[question.key]" [label]="question.label"
          [split]="cols > question.cols" [theme]="question.key === 'girls' && 'accent'" [type]="question.controlType">
        </app-form-input>
      </mat-grid-tile>
      <mat-grid-tile *ngIf="question.offset"></mat-grid-tile>
    </ng-container>
  </mat-grid-list>
</ng-template>