<div class="add-facility">
    <app-modal>
        <app-sleeping-options-by-day [sleepingOptionsByDay]='days' [showSleepAreas]='showSleepAreas'
            (emitCurrentDay)='getDay($event)'>
        </app-sleeping-options-by-day>
        <div class="add-facility__header">
            <div class="add-facility__header-icon">
                <svg-icon [src]="facility.svgUrl" class="header__form-group-svg"></svg-icon>
            </div>
            <div class="add-facility__header-content">
                <div class="add-facility__header-content-heading">
                    <span class="add-facility__header-content-heading-constant">שריין מתקן:</span>
                    <span class="add-facility__header-content-heading-input">{{facility.headline}}</span>
                </div>
                <div class="add-facility__header-content-heading-remarks">
                    <span>{{facility.maxParticipants}}</span>
                </div>
            </div>
        </div>
        <form class="add-facility__form" [formGroup]="addFacilityForm" (ngSubmit)='onSubmit()'>
            <div class="add-facility__form-inputs">
                <mat-form-field appearance="outline">
                    <mat-label>משעה</mat-label>
                    <input matInput type='time' formControlName="start">
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>עד שעה</mat-label>
                    <input matInput type='time' formControlName="end">
                </mat-form-field>
                <button class="add-facility__form-button" [disabled]="!addFacilityForm.valid">שריין</button>
            </div>
        </form>

        <div class="add-facility__occupied-hours-bar">
            <span class="add-facility__occupied-hours-bar-slot" *ngFor="let item of occupiedHoursArray" [ngClass]="{'background-green':item.user =='none',
        'background-grey':(item.user !=='none' && item.user !== username), 
        'background-blue':(item.user === username) }" [ngStyle]="{'width': calculateWidth(item.totalHours) }"></span>
        </div>
        <div class="add-facility__occupied-hours-table">
            <div class="add-facility__occupied-hours-table-header">
                <span class="add-facility__occupied-hours-table-header-right">תפוסת מתקן</span>
                <span class="add-facility__occupied-hours-table-header-left">
                    <span class="add-facility__occupied-hours-table-header-left-type green">פנוי</span>
                    <span class="add-facility__occupied-hours-table-header-left-type grey">תפוס</span>
                    <span class="add-facility__occupied-hours-table-header-left-type blue">שוריין עבורי</span>
                </span>
            </div>
            <div class="add-facility__occupied-hours-table-item" *ngFor="let item of hours">
                <span class="add-facility__occupied-hours-hour-start">{{
                    item.startingHour | numberToTimePipe
                    }}</span>
                <span class="add-facility__occupied-hours-hour-end">
                    <span> -</span> {{ item.endingHour | numberToTimePipe}}</span>
                <span class="add-facility__occupied-hours-hour-user">נתפס ע"י {{ item.user }} </span>
            </div>
        </div>
    </app-modal>
</div>
